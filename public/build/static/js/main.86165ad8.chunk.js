(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{53:function(e,n,t){},55:function(e,n,t){"use strict";t.r(n);var i=t(4),a=t(27),s=t(1),r=t.n(s),c=t(6),u=t(18),d=t.n(u),l=t(12),o=t(13),p=t(15),j=t(14),h=t(58),b=t(11),m=t(31),O=t.n(m);function v(){var e=Object(b.a)(["\n    mutation($id: ID!)  {\n     deleteBook(id : $id){\n      \n        name\n        id\n      \n     }    \n    }\n"]);return v=function(){return e},e}function f(){var e=Object(b.a)(["\n    mutation($cuisine_id : Int!  , $meal_id: Int! , $id:ID!)  {\n      updateRecipe(cuisine_id:$cuisine_id,meal_id:$meal_id,id:$id){\n        meal_id\n        cuisine_id\n        id\n     }    \n    }\n"]);return f=function(){return e},e}function g(){var e=Object(b.a)(["\n    mutation($name : String! , $genre: String!, $id:  ID!)  {\n      updateBook(name:$name,genre:$genre,id:$id){\n      name\n      genre\n      id\n     }    \n    }\n"]);return g=function(){return e},e}function y(){var e=Object(b.a)(["\n    mutation($name : String! , $genre: String!, $authorId: ID!)  {\n     addBook(name:$name,genre:$genre,authorId:$authorId){\n      name\n      id\n     }    \n    }\n"]);return y=function(){return e},e}function _(){var e=Object(b.a)(["\n    query($id:ID){\n        recipy(id:$id) {\n          id\n          name\n          meal_id\n          cuisine_id\n          description\n        }\n    }\n"]);return _=function(){return e},e}function x(){var e=Object(b.a)(["\n    query($id:ID){\n        meal(id:$id) {\n          id\n          type\n        }\n    }\n"]);return x=function(){return e},e}function C(){var e=Object(b.a)(["\n    query($id:ID){\n        cuisine(id:$id) {\n          id\n          name\n        }\n    }\n"]);return C=function(){return e},e}function $(){var e=Object(b.a)(["\n    {\n        cuisines {\n            name\n            id\n            meals   {\n                type\n                id\n            }\n        }\n    }\n"]);return $=function(){return e},e}function S(){var e=Object(b.a)(["\n    {\n        recipes {\n            name\n            id\n            description\n            meal_id\n            cuisine_id    \n          \n        }\n    }\n"]);return S=function(){return e},e}function k(){var e=Object(b.a)(["\n    {\n        meals {\n            id\n            type\n        }\n    }\n"]);return k=function(){return e},e}function M(){var e=Object(b.a)(["\n    {\n        authors {\n            name\n            id\n        }\n    }\n"]);return M=function(){return e},e}function F(){var e=Object(b.a)(["\n    {\n        cuisine_meal {\n            cuisine_id \n             meal_id\n        }\n    }\n"]);return F=function(){return e},e}function I(){var e=Object(b.a)(["\n    {\n        authors {\n            name\n            id\n        }\n    }\n"]);return I=function(){return e},e}O()(I());var D=O()(F()),N=(O()(M()),O()(k())),Q=O()(S()),R=O()($()),B=O()(C()),P=O()(x()),w=O()(_()),q=(O()(y()),O()(g()),O()(f())),A=(O()(v()),t(28)),L=t.n(A),T=t(33),E=t(29),H=t(34),V=t(30),G=(t(46),function(e){Object(p.a)(t,e);var n=Object(j.a)(t);function t(){var e;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).state={loading:!1,selected_meal_id:"",mealOptions:[],isEditing:!1,isDeleting:!1,selected:"",disableFirst:!1,mealsByID:{}},e}return Object(o.a)(t,[{key:"cuisineOptions",value:function(){var e=this.props.getCuisineQuery;return this.props.getMealCuisinePivotQuery.loading||e.loading?[]:e.cuisines}},{key:"componentDidUpdate",value:function(e,n){if(this.props.recipe!==e.recipe){var t=this.props.recipe.cuisine_id,i=this.props.recipe.meal_id;this.setState({selected:t,selected_meal_id:i}),this.onChangeCuisine(t)}}},{key:"onChangeCuisine",value:function(e){var n=String(e);this.setState({disableFirst:!0,selected:n}),this.setMealOptions(n)}},{key:"onSubmitForm",value:function(){var e=Object(T.a)(L.a.mark((function e(n){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t={meal_id:Number(this.state.selected_meal_id),cuisine_id:Number(this.state.selected),id:Number(this.props.recipe.id)},this.setState({loading:"true"}),this.props.updateRecipeMutation({variables:t,refetchQueries:[{query:Q}]}),this.setState({loading:!1}),V.b.success(this.props.recipe.name+" UPDATED!",{autoClose:3e3});case 6:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"setMealOptions",value:function(e){var n=Object(E.groupBy)(this.props.getMealCuisinePivotQuery.cuisine_meal,"cuisine_id")[e];n||(n=[]),this.setState({mealOptions:n}),this.setMealIdValue(n)}},{key:"setMealIdValue",value:function(e){var n=e.map((function(e){return e.meal_id}));n.includes(this.state.selected_meal_id)||this.setState({selected_meal_id:n[0]})}},{key:"onChangeMealHandeler",value:function(e){this.setState({selected_meal_id:e.target.value})}},{key:"render",value:function(){var e=this;console.log("12345",12345);var n=this.props.recipe,t=this.props.getMealQuery,a={};t.loading||(a=Object(E.keyBy)(this.props.getMealQuery.meals,"id"));var s=this.cuisineOptions();s=s.map((function(e){return Object(i.jsx)("option",{value:e.id,children:e.name},e.id)}));var r=Object(i.jsx)("option",{});this.state.mealOptions.length&&(r=this.state.mealOptions.map((function(e){var n=e.meal_id;return Object(i.jsxs)("option",{value:n,children:[" ",a[n].type]},n)})));var c=this.state.loading?"Please Wait ...":"\u21aa Go!",u=n.name?Object(i.jsxs)("h2",{children:["Edit Recipe ",n.name]}):Object(i.jsx)("h2",{children:"No recipes Selected..."});return Object(i.jsxs)("div",{id:"cuisine-details",children:[u,Object(i.jsx)("hr",{}),Object(i.jsx)("br",{}),Object(i.jsx)("form",{id:"edit-recipe",className:"recipes-container",onSubmit:this.onSubmitForm.bind(this),children:Object(i.jsxs)("fieldset",{disabled:!n.name||"true"===this.state.loading,children:[Object(i.jsx)("label",{htmlFor:"cuisine_id",children:"Cuisine"}),Object(i.jsxs)("select",{value:this.state.selected,name:"cuisine_id",id:"cuisine_id",onChange:function(n){return e.onChangeCuisine(n.target.value)},children:[Object(i.jsx)("option",{value:"",disabled:this.state.disableFirst,children:"Select Cuisine..."}),s]}),Object(i.jsx)("label",{htmlFor:"meal_id",children:"Meal"}),Object(i.jsxs)("select",{ref:function(n){return e.selectVal=n},onChange:function(n){return e.onChangeMealHandeler(n)},value:this.state.selected_meal_id,name:"meal_id",id:"meal_id",children:[r," "]}),Object(i.jsx)("button",{className:"submit-edit",children:c})]})}),Object(i.jsx)(V.a,{})]})}}]),t}(s.Component)),J=H(Object(h.a)(D,{name:"getMealCuisinePivotQuery"}),Object(h.a)(R,{name:"getCuisineQuery"}),Object(h.a)(Q,{name:"getRecipyQuery"}),Object(h.a)(q,{name:"updateRecipeMutation"}),Object(h.a)(N,{name:"getMealQuery"}))(G),U=function(){return Object(i.jsxs)("div",{className:"spinner",children:[Object(i.jsx)("div",{className:"double-bounce1"}),Object(i.jsx)("div",{className:"double-bounce2"})]})},W=function(e){Object(p.a)(t,e);var n=Object(j.a)(t);function t(){return Object(l.a)(this,t),n.apply(this,arguments)}return Object(o.a)(t,[{key:"displayCuisineName",value:function(){if(this.props.data.loading&&this.props.cuisine_id)return Object(i.jsx)(U,{});var e=this.props.data.cuisine;return e&&this.props.cuisine_id?Object(i.jsxs)("p",{children:["\ud83c\udf0c",Object(i.jsx)("b",{children:" Cuisine : "})," ",e.name]}):Object(i.jsx)("span",{})}},{key:"render",value:function(){var e=this.displayCuisineName();return Object(i.jsx)(r.a.Fragment,{children:e})}}]),t}(s.Component),z=Object(h.a)(B,{options:function(e){return{variables:{id:e.cuisine_id}}}})(W),K=function(e){Object(p.a)(t,e);var n=Object(j.a)(t);function t(){return Object(l.a)(this,t),n.apply(this,arguments)}return Object(o.a)(t,[{key:"displayMealType",value:function(){if(this.props.data.loading&&this.props.meal_id)return Object(i.jsx)(U,{});var e=this.props.data.meal;return e&&this.props.meal_id?Object(i.jsxs)("p",{children:["\ud83c\udf0c",Object(i.jsx)("b",{children:" Meal : "})," ",e.type]}):Object(i.jsx)("span",{})}},{key:"render",value:function(){var e=this.displayMealType();return Object(i.jsx)(r.a.Fragment,{children:e})}}]),t}(s.Component),X=Object(h.a)(P,{options:function(e){return{variables:{id:e.meal_id}}}})(K),Y=function(e){Object(p.a)(t,e);var n=Object(j.a)(t);function t(){return Object(l.a)(this,t),n.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=this.props.data.recipy,n="",t="";return e&&(n=e.cuisine_id,t=e.meal_id),Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)(z,{cuisine_id:n}),Object(i.jsx)(X,{meal_id:t})]})}}]),t}(s.Component),Z=Object(h.a)(w,{options:function(e){return{variables:{id:e.recipy_id}}}})(Y),ee=function(e){Object(p.a)(t,e);var n=Object(j.a)(t);function t(){var e;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).state={disableFirst:!1,selected:{}},e}return Object(o.a)(t,[{key:"displayRecipes",value:function(){var e=this.props.data;if(e.recipes)return e.recipes.map((function(e){return Object(i.jsx)("option",{value:e.id,children:e.name},e.id)}))}},{key:"render",value:function(){var e=this;console.log("12345",12345);var n=this.props.data.loading?"Loading...":"Select Recipe",t="",a="";return this.state.selected&&this.state.selected.description&&(t=Object(i.jsxs)("p",{children:["\ud83c\udf0c",Object(i.jsx)("b",{children:" Desciption:"})," ",this.state.selected.description]}),a=Object(i.jsxs)("h4",{children:[" Name : ",this.state.selected.name]})),Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsxs)("div",{className:"recipes-container",children:["Recipy List",Object(i.jsxs)("select",{id:"recipe-list",disabled:this.props.data.loading,onChange:function(n){return e.setState({disableFirst:!0,selected:e.props.data.recipes.find((function(e){return e.id===n.target.value}))})},children:[Object(i.jsx)("option",{disabled:this.state.disableFirst,value:void 0,children:n}),this.displayRecipes()]}),Object(i.jsx)("hr",{}),a,Object(i.jsx)(Z,{recipy_id:this.state.selected.id}),t]}),Object(i.jsx)(J,{recipe:this.state.selected,notSelect:function(){return e.setState({selected:null})}})]})}}]),t}(s.Component),ne=Object(h.a)(Q)(ee);var te=function(){return Object(i.jsxs)("div",{id:"main",children:[Object(i.jsx)("h1",{children:"AMIR GRAPHQL"}),Object(i.jsx)(ne,{})]})},ie=(t(53),function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,59)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,s=n.getLCP,r=n.getTTFB;t(e),i(e),a(e),s(e),r(e)}))}),ae=new a.a({uri:"/graphql"});d.a.render(Object(i.jsx)(c.b,{client:ae,children:Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(te,{})})}),document.getElementById("root")),ie()}},[[55,1,2]]]);
//# sourceMappingURL=main.86165ad8.chunk.js.map